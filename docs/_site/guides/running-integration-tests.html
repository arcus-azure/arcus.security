<!DOCTYPE html>
<html lang="en-US">

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/style.css?v=7baf48db576caa317d2a800a81d338736aff87c0">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Runnning integration tests with Arcus | Arcus Security</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Runnning integration tests with Arcus" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Azure Security development in a breeze" />
<meta property="og:description" content="Azure Security development in a breeze" />
<link rel="canonical" href="http://localhost:4000/guides/running-integration-tests.html" />
<meta property="og:url" content="http://localhost:4000/guides/running-integration-tests.html" />
<meta property="og:site_name" content="Arcus Security" />
<script type="application/ld+json">
{"headline":"Runnning integration tests with Arcus","url":"http://localhost:4000/guides/running-integration-tests.html","description":"Azure Security development in a breeze","@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://raw.githubusercontent.com/arcus-azure/arcus/master/media/arcus.png"}},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/arcus-azure/arcus.security">View on GitHub</a>

          <h1 id="project_title">Arcus Security</h1>
          <h2 id="project_tagline">Azure Security development in a breeze</h2>

          
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1 id="runnning-integration-tests-with-arcus">Runnning integration tests with Arcus</h1>

<p>We provide some testing infrastructure that allows you to run integration tests on top of Azure Key Vault.</p>

<h2 id="azure-infrastructure">Azure Infrastructure</h2>

<p>An Azure Active Directory (AD) App is required to be created. 
The <strong>Application Id/Client Id</strong> and <strong>Application Secret/Access Key</strong> should be set as environment variables.</p>

<p><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Farcus-azure%2Farcus.security%2Fmaster%2Fdeploy%2Farm%2Fazuredeploy.json" target="_blank">
    <img src="https://azuredeploy.net/deploybutton.png">
</a></p>

<h2 id="local-environment">Local Environment</h2>

<p>Configure the following environment variables:</p>
<ul>
  <li>
<code class="highlighter-rouge">Arcus__KeyVault__Uri</code>: The URI where the vault is located.</li>
  <li>
<code class="highlighter-rouge">Arcus__KeyVault__TestKeyName</code>: The name of a secret in your Key Vault that will be used throughout the tests.</li>
  <li>
<code class="highlighter-rouge">Arcus__ServicePrincipal__ClientId</code>: Object id of the Azure AD Application.</li>
  <li>
<code class="highlighter-rouge">Arcus__ServicePrincipal__AccessKey</code>: Secret of the Azure AD Application.</li>
</ul>

<p>Once you have completed the above, you can run <code class="highlighter-rouge">dotnet test</code> from the <code class="highlighter-rouge">src\Arcus.Security.Tests.Integration</code> directory.</p>

<hr>

<p><img class="emoji" title=":pencil:" alt=":pencil:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f4dd.png" height="20" width="20"> <em><strong>Notes</strong></em></p>

<ul>
  <li><em>If you are using Visual Studio, you must restart Visual Studio in order to use new Environment Variables.</em></li>
  <li><em><code class="highlighter-rouge">src\Arcus.Security.Tests.Integration\appsettings.json</code> can also be overriden but it brings the risk of commiting these changes. <strong>This approach is not recommended.</strong> This is also why we donâ€™t use <code class="highlighter-rouge">appsettings.{Environment}.json</code></em></li>
</ul>

<hr>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        
        <p class="copyright">Arcus Security maintained by <a href="https://github.com/arcus-azure">arcus-azure</a></p>
        
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    
  </body>
</html>
